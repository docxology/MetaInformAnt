

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Math Module: Review and Improvement Plan &mdash; METAINFORMANT 0.2.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=938c9ccc"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../index.html" class="icon icon-home">
            METAINFORMANT
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dna/index.html">DNA: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rna/index.html">RNA: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protein/index.html">Protein: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gwas/index.html">GWAS (Genome-Wide Association Studies)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../epigenome/index.html">Epigenome: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../epigenome/index.html#key-components">Key Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../epigenome/index.html#integration-with-genomics">Integration with Genomics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../epigenome/index.html#analysis-workflows">Analysis Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../epigenome/index.html#planned-extensions">Planned Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ontology/index.html">Ontology Module Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../phenotype/index.html">Phenotype: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecology/index.html">Ecology: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecology/index.html#key-components">Key Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecology/index.html#analysis-workflows">Analysis Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecology/index.html#integration-with-other-modules">Integration with Other Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecology/index.html#planned-extensions">Planned Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Math: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ml/index.html">Machine Learning: Biological Data Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networks/index.html">Networks: Biological Network Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../singlecell/index.html">Single-Cell Genomics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quality/index.html">Quality Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../visualization/index.html">Visualization: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../simulation/index.html">Simulation: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../life_events/index.html">Life Events Module</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../testing.html">Testing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">METAINFORMANT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Math Module: Review and Improvement Plan</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/math/REVIEW_AND_IMPROVEMENT_PLAN.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="math-module-review-and-improvement-plan">
<h1>Math Module: Review and Improvement Plan<a class="headerlink" href="#math-module-review-and-improvement-plan" title="Link to this heading"></a></h1>
<p><strong>Date</strong>: 2025-01-06<br />
<strong>Scope</strong>: Complete review of <code class="docutils literal notranslate"><span class="pre">src/metainformant/math/</span></code> module<br />
<strong>Status</strong>: Analysis Complete</p>
<section id="executive-summary">
<h2>Executive Summary<a class="headerlink" href="#executive-summary" title="Link to this heading"></a></h2>
<p>The math module is well-structured with comprehensive coverage of theoretical biology topics. It demonstrates strong mathematical rigor and good code organization. However, there are opportunities for improvement in documentation consistency, error handling, test coverage gaps, and API completeness.</p>
<p><strong>Overall Assessment</strong>: ⭐⭐⭐⭐ (4/5) - Strong foundation with clear improvement pathways</p>
</section>
<hr class="docutils" />
<section id="code-quality-assessment">
<h2>1. Code Quality Assessment<a class="headerlink" href="#code-quality-assessment" title="Link to this heading"></a></h2>
<section id="strengths">
<h3>1.1 Strengths<a class="headerlink" href="#strengths" title="Link to this heading"></a></h3>
<p>✅ <strong>Modular Design</strong>: Clear separation of concerns across submodules<br />
✅ <strong>Mathematical Rigor</strong>: Functions are well-grounded in literature with references<br />
✅ <strong>Type Hints</strong>: Comprehensive type annotations throughout<br />
✅ <strong>Docstrings</strong>: Most functions have detailed docstrings with examples<br />
✅ <strong>Test Coverage</strong>: Extensive test suite (22+ test files)<br />
✅ <strong>Edge Case Handling</strong>: Most functions handle invalid inputs gracefully</p>
</section>
<section id="issues-identified">
<h3>1.2 Issues Identified<a class="headerlink" href="#issues-identified" title="Link to this heading"></a></h3>
<section id="critical-issues">
<h4>Critical Issues<a class="headerlink" href="#critical-issues" title="Link to this heading"></a></h4>
<ol class="arabic simple">
<li><p><strong>Placeholder Implementation</strong> (<code class="docutils literal notranslate"><span class="pre">__init__.py:305-348</span></code>)</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">fisher_exact_test()</span></code> returns placeholder p-value (1.0)</p></li>
<li><p>Should either implement properly or remove/warn users</p></li>
</ul>
</li>
<li><p><strong>Missing Exports</strong> (<code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>)</p>
<ul class="simple">
<li><p>Functions defined in <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> not in <code class="docutils literal notranslate"><span class="pre">__all__</span></code>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">correlation_coefficient</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">linear_regression</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fisher_exact_test</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shannon_entropy</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jensen_shannon_divergence</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">wattersons_theta</span></code> defined in <code class="docutils literal notranslate"><span class="pre">coalescent.py</span></code> but not exported</p></li>
</ul>
</li>
<li><p><strong>Inconsistent Error Handling</strong></p>
<ul class="simple">
<li><p>Some functions raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (e.g., <code class="docutils literal notranslate"><span class="pre">effective_population_size_from_heterozygosity</span></code>)</p></li>
<li><p>Others return 0.0 or default values</p></li>
<li><p>No consistent error handling strategy</p></li>
</ul>
</li>
<li><p><strong>Optional Dependencies</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">scipy</span></code> used conditionally but not declared as optional dependency</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy</span></code> used in <code class="docutils literal notranslate"><span class="pre">popgen_stats.py</span></code> but dependency not clearly documented</p></li>
</ul>
</li>
</ol>
</section>
<section id="moderate-issues">
<h4>Moderate Issues<a class="headerlink" href="#moderate-issues" title="Link to this heading"></a></h4>
<ol class="arabic simple" start="5">
<li><p><strong>Deprecation Warnings</strong> (<code class="docutils literal notranslate"><span class="pre">coalescent.py:632-704</span></code>)</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">expected_segregating_sites()</span></code> has deprecated parameter order</p></li>
<li><p>Should be removed or clearly documented</p></li>
</ul>
</li>
<li><p><strong>Incomplete Functionality</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">fay_wu_h()</span></code> doesn’t fully implement derived allele counting (lines 347-399)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hardy_weinberg_test()</span></code> has scipy fallback but could be more robust</p></li>
</ul>
</li>
<li><p><strong>Documentation Inconsistencies</strong></p>
<ul class="simple">
<li><p>Some functions have detailed examples, others don’t</p></li>
<li><p>README.md references non-existent modules (<code class="docutils literal notranslate"><span class="pre">kin_selection.py</span></code>, <code class="docutils literal notranslate"><span class="pre">multilevel_selection.py</span></code>)</p></li>
<li><p>AGENTS.md could be more detailed</p></li>
</ul>
</li>
<li><p><strong>Code Duplication</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">watterson_theta()</span></code> exists in both <code class="docutils literal notranslate"><span class="pre">popgen.py</span></code> and <code class="docutils literal notranslate"><span class="pre">coalescent.py</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wattersons_theta()</span></code> also in <code class="docutils literal notranslate"><span class="pre">coalescent.py</span></code> (alias)</p></li>
<li><p>Could be consolidated</p></li>
</ul>
</li>
</ol>
</section>
</section>
</section>
<hr class="docutils" />
<section id="documentation-review">
<h2>2. Documentation Review<a class="headerlink" href="#documentation-review" title="Link to this heading"></a></h2>
<section id="module-documentation-init-py">
<h3>2.1 Module Documentation (<code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>)<a class="headerlink" href="#module-documentation-init-py" title="Link to this heading"></a></h3>
<p><strong>Current State</strong>: Good module-level docstring<br />
<strong>Issues</strong>:</p>
<ul class="simple">
<li><p>Missing list of key functions by category</p></li>
<li><p>No usage examples in module docstring</p></li>
<li><p>Doesn’t mention optional dependencies</p></li>
</ul>
<p><strong>Recommendation</strong>: Expand module docstring with:</p>
<ul class="simple">
<li><p>Brief overview of each submodule</p></li>
<li><p>Key use cases</p></li>
<li><p>Dependency information</p></li>
</ul>
</section>
<section id="readme-md">
<h3>2.2 README.md<a class="headerlink" href="#readme-md" title="Link to this heading"></a></h3>
<p><strong>Current State</strong>: Comprehensive but has inaccuracies<br />
<strong>Issues</strong>:</p>
<ul class="simple">
<li><p>References <code class="docutils literal notranslate"><span class="pre">kin_selection.py</span></code> and <code class="docutils literal notranslate"><span class="pre">multilevel_selection.py</span></code> (should be <code class="docutils literal notranslate"><span class="pre">selection.py</span></code>)</p></li>
<li><p>Missing documentation for <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> utility functions</p></li>
<li><p>No troubleshooting section</p></li>
<li><p>Missing performance benchmarks/guidelines</p></li>
</ul>
<p><strong>Recommendation</strong>:</p>
<ul class="simple">
<li><p>Fix module references</p></li>
<li><p>Add section on utility functions in <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code></p></li>
<li><p>Add troubleshooting/common issues section</p></li>
<li><p>Document performance characteristics</p></li>
</ul>
</section>
<section id="agents-md">
<h3>2.3 AGENTS.md<a class="headerlink" href="#agents-md" title="Link to this heading"></a></h3>
<p><strong>Current State</strong>: Basic, follows template<br />
<strong>Issues</strong>:</p>
<ul class="simple">
<li><p>Generic descriptions</p></li>
<li><p>Doesn’t detail specific AI contributions per function</p></li>
<li><p>Missing future enhancement plans</p></li>
</ul>
<p><strong>Recommendation</strong>: Enhance with:</p>
<ul class="simple">
<li><p>Specific examples of AI-assisted implementations</p></li>
<li><p>Function-level contribution notes</p></li>
<li><p>Future AI integration plans</p></li>
</ul>
</section>
<section id="function-docstrings">
<h3>2.4 Function Docstrings<a class="headerlink" href="#function-docstrings" title="Link to this heading"></a></h3>
<p><strong>Current State</strong>: Generally excellent<br />
<strong>Issues</strong>:</p>
<ul class="simple">
<li><p>Some functions missing examples (e.g., <code class="docutils literal notranslate"><span class="pre">CoalescentSummary</span></code> methods)</p></li>
<li><p>Inconsistent format for examples</p></li>
<li><p>Some references missing DOIs</p></li>
</ul>
<p><strong>Recommendation</strong>: Standardize docstring format:</p>
<ul class="simple">
<li><p>Always include examples</p></li>
<li><p>Use consistent example format</p></li>
<li><p>Add DOI links where available</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="test-coverage-analysis">
<h2>3. Test Coverage Analysis<a class="headerlink" href="#test-coverage-analysis" title="Link to this heading"></a></h2>
<section id="coverage-by-submodule">
<h3>3.1 Coverage by Submodule<a class="headerlink" href="#coverage-by-submodule" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Submodule</p></th>
<th class="head"><p>Test Files</p></th>
<th class="head"><p>Coverage</p></th>
<th class="head"><p>Status</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">coalescent.py</span></code></p></td>
<td><p>3 files</p></td>
<td><p>Excellent</p></td>
<td><p>✅</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">price.py</span></code></p></td>
<td><p>1 file</p></td>
<td><p>Good</p></td>
<td><p>✅</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">popgen.py</span></code></p></td>
<td><p>2 files</p></td>
<td><p>Good</p></td>
<td><p>✅</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ld.py</span></code></p></td>
<td><p>2 files</p></td>
<td><p>Good</p></td>
<td><p>✅</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">epidemiology.py</span></code></p></td>
<td><p>3 files</p></td>
<td><p>Good</p></td>
<td><p>✅</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dynamics.py</span></code></p></td>
<td><p>1 file</p></td>
<td><p>Good</p></td>
<td><p>✅</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ddm.py</span></code></p></td>
<td><p>1 file</p></td>
<td><p>Good</p></td>
<td><p>✅</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">selection.py</span></code></p></td>
<td><p>1 file</p></td>
<td><p>Good</p></td>
<td><p>✅</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">quantgen.py</span></code></p></td>
<td><p>1 file</p></td>
<td><p>Good</p></td>
<td><p>✅</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">egt.py</span></code></p></td>
<td><p>Part of combined</p></td>
<td><p>Good</p></td>
<td><p>✅</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fst.py</span></code></p></td>
<td><p>Part of combined</p></td>
<td><p>Good</p></td>
<td><p>✅</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">effective_size.py</span></code></p></td>
<td><p>1 file</p></td>
<td><p>Good</p></td>
<td><p>✅</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">demography.py</span></code></p></td>
<td><p>1 file</p></td>
<td><p>Good</p></td>
<td><p>✅</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">popgen_stats.py</span></code></p></td>
<td><p>1 file</p></td>
<td><p>Good</p></td>
<td><p>✅</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> utilities</p></td>
<td><p>1 file</p></td>
<td><p>Partial</p></td>
<td><p>⚠️</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">selection_experiments/</span></code></p></td>
<td><p>1 file</p></td>
<td><p>Good</p></td>
<td><p>✅</p></td>
</tr>
</tbody>
</table>
</section>
<section id="missing-test-coverage">
<h3>3.2 Missing Test Coverage<a class="headerlink" href="#missing-test-coverage" title="Link to this heading"></a></h3>
<p><strong>Critical Gaps</strong>:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> utility functions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">correlation_coefficient()</span></code> - No dedicated tests</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">linear_regression()</span></code> - No dedicated tests</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fisher_exact_test()</span></code> - Needs tests (placeholder)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shannon_entropy()</span></code> - No dedicated tests</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jensen_shannon_divergence()</span></code> - No dedicated tests</p></li>
</ul>
</li>
<li><p>Edge Cases:</p>
<ul class="simple">
<li><p>Very large sample sizes</p></li>
<li><p>Extreme parameter values</p></li>
<li><p>Numerical precision limits</p></li>
</ul>
</li>
<li><p>Integration Tests:</p>
<ul class="simple">
<li><p>Cross-module functionality</p></li>
<li><p>Workflow examples</p></li>
</ul>
</li>
</ol>
<p><strong>Recommendation</strong>: Add tests for:</p>
<ul class="simple">
<li><p>All <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> utility functions</p></li>
<li><p>Edge cases with extreme values</p></li>
<li><p>Integration scenarios</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="api-design-review">
<h2>4. API Design Review<a class="headerlink" href="#api-design-review" title="Link to this heading"></a></h2>
<section id="function-signatures">
<h3>4.1 Function Signatures<a class="headerlink" href="#function-signatures" title="Link to this heading"></a></h3>
<p><strong>Strengths</strong>:</p>
<ul class="simple">
<li><p>Consistent use of type hints</p></li>
<li><p>Clear parameter names</p></li>
<li><p>Good use of keyword-only arguments where appropriate</p></li>
</ul>
<p><strong>Issues</strong>:</p>
<ul class="simple">
<li><p>Some functions have too many parameters (e.g., <code class="docutils literal notranslate"><span class="pre">lotka_volterra_step()</span></code>)</p></li>
<li><p>Inconsistent ordering of similar parameters across functions</p></li>
<li><p>Missing validation for some parameter ranges</p></li>
</ul>
<p><strong>Recommendation</strong>:</p>
<ul class="simple">
<li><p>Consider dataclasses for functions with 5+ parameters</p></li>
<li><p>Standardize parameter ordering (e.g., always <code class="docutils literal notranslate"><span class="pre">sample_size</span></code> before <code class="docutils literal notranslate"><span class="pre">effective_population_size</span></code>)</p></li>
<li><p>Add range validation with clear error messages</p></li>
</ul>
</section>
<section id="return-types">
<h3>4.2 Return Types<a class="headerlink" href="#return-types" title="Link to this heading"></a></h3>
<p><strong>Strengths</strong>:</p>
<ul class="simple">
<li><p>Clear return type annotations</p></li>
<li><p>Consistent tuple ordering</p></li>
</ul>
<p><strong>Issues</strong>:</p>
<ul class="simple">
<li><p>Some functions return 0.0 on error, others raise exceptions</p></li>
<li><p>Inconsistent handling of invalid inputs</p></li>
</ul>
<p><strong>Recommendation</strong>: Establish error handling policy:</p>
<ul class="simple">
<li><p>Use exceptions for programming errors (invalid types)</p></li>
<li><p>Use sentinel values (0.0, None) for domain errors (invalid ranges)</p></li>
<li><p>Document error behavior clearly</p></li>
</ul>
</section>
<section id="export-completeness">
<h3>4.3 Export Completeness<a class="headerlink" href="#export-completeness" title="Link to this heading"></a></h3>
<p><strong>Missing from <code class="docutils literal notranslate"><span class="pre">__all__</span></code></strong>:</p>
<ul class="simple">
<li><p>All utility functions in <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wattersons_theta</span></code> (alias)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CoalescentSummary</span></code> class</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">site_frequency_spectrum_counts</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expected_sfs_counts</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expected_coalescent_waiting_times</span></code></p></li>
</ul>
<p><strong>Recommendation</strong>: Review all public functions and add to <code class="docutils literal notranslate"><span class="pre">__all__</span></code></p>
</section>
</section>
<hr class="docutils" />
<section id="performance-considerations">
<h2>5. Performance Considerations<a class="headerlink" href="#performance-considerations" title="Link to this heading"></a></h2>
<section id="current-performance">
<h3>5.1 Current Performance<a class="headerlink" href="#current-performance" title="Link to this heading"></a></h3>
<p><strong>Strengths</strong>:</p>
<ul class="simple">
<li><p>Vectorized operations where appropriate (NumPy)</p></li>
<li><p>Efficient algorithms (e.g., harmonic means)</p></li>
</ul>
<p><strong>Issues</strong>:</p>
<ul class="simple">
<li><p>Some functions use list comprehensions where NumPy would be faster</p></li>
<li><p>No caching for expensive computations (e.g., <code class="docutils literal notranslate"><span class="pre">tajima_constants</span></code>)</p></li>
<li><p>Some functions could benefit from memoization</p></li>
</ul>
<p><strong>Recommendation</strong>:</p>
<ul class="simple">
<li><p>Profile critical functions</p></li>
<li><p>Add caching for expensive computations (e.g., <code class="docutils literal notranslate"><span class="pre">tajima_constants</span></code>)</p></li>
<li><p>Consider NumPy vectorization for loops over large datasets</p></li>
</ul>
</section>
<section id="memory-usage">
<h3>5.2 Memory Usage<a class="headerlink" href="#memory-usage" title="Link to this heading"></a></h3>
<p><strong>Current State</strong>: Generally efficient<br />
<strong>Recommendation</strong>: Document memory requirements for large-scale operations</p>
</section>
</section>
<hr class="docutils" />
<section id="mathematical-correctness">
<h2>6. Mathematical Correctness<a class="headerlink" href="#mathematical-correctness" title="Link to this heading"></a></h2>
<section id="formula-verification">
<h3>6.1 Formula Verification<a class="headerlink" href="#formula-verification" title="Link to this heading"></a></h3>
<p><strong>Status</strong>: ✅ Functions appear mathematically correct<br />
<strong>Recommendation</strong>: Add numerical validation tests against known analytical solutions</p>
</section>
<section id="numerical-stability">
<h3>6.2 Numerical Stability<a class="headerlink" href="#numerical-stability" title="Link to this heading"></a></h3>
<p><strong>Issues</strong>:</p>
<ul class="simple">
<li><p>Some functions may have numerical precision issues with extreme values</p></li>
<li><p>No explicit handling of floating-point errors</p></li>
</ul>
<p><strong>Recommendation</strong>:</p>
<ul class="simple">
<li><p>Add numerical stability tests</p></li>
<li><p>Document precision limitations</p></li>
<li><p>Consider using <code class="docutils literal notranslate"><span class="pre">math.isclose()</span></code> for comparisons</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="selection-experiments-submodule">
<h2>7. Selection Experiments Submodule<a class="headerlink" href="#selection-experiments-submodule" title="Link to this heading"></a></h2>
<section id="current-state">
<h3>7.1 Current State<a class="headerlink" href="#current-state" title="Link to this heading"></a></h3>
<p><strong>Strengths</strong>:</p>
<ul class="simple">
<li><p>Well-documented with comprehensive README</p></li>
<li><p>Clear separation of concerns (model, plotting, CLI)</p></li>
<li><p>Good examples</p></li>
</ul>
<p><strong>Issues</strong>:</p>
<ul class="simple">
<li><p>No integration with main module exports</p></li>
<li><p>CLI could have better error handling</p></li>
<li><p>Missing tests for plotting functions</p></li>
</ul>
<p><strong>Recommendation</strong>:</p>
<ul class="simple">
<li><p>Add selection_experiments to main module exports (optional)</p></li>
<li><p>Improve CLI error messages</p></li>
<li><p>Add tests for plotting functions</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="improvement-plan">
<h2>8. Improvement Plan<a class="headerlink" href="#improvement-plan" title="Link to this heading"></a></h2>
<section id="phase-1-critical-fixes-priority-high">
<h3>Phase 1: Critical Fixes (Priority: High)<a class="headerlink" href="#phase-1-critical-fixes-priority-high" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>Fix Placeholder Implementation</strong> (1-2 hours)</p>
<ul class="contains-task-list simple">
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Implement proper <code class="docutils literal notranslate"><span class="pre">fisher_exact_test()</span></code> or mark as TODO</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Add warning/docstring about placeholder status</p></li>
</ul>
</li>
<li><p><strong>Complete Exports</strong> (30 minutes)</p>
<ul class="contains-task-list simple">
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Add all <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> functions to <code class="docutils literal notranslate"><span class="pre">__all__</span></code></p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Add missing coalescent functions to exports</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Verify all public APIs are exported</p></li>
</ul>
</li>
<li><p><strong>Error Handling Consistency</strong> (2-3 hours)</p>
<ul class="contains-task-list simple">
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Establish error handling policy</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Standardize error responses across module</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Document error behavior</p></li>
</ul>
</li>
<li><p><strong>Fix Documentation Inaccuracies</strong> (1 hour)</p>
<ul class="contains-task-list simple">
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Update README.md module references</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Fix broken cross-references</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Add missing function documentation</p></li>
</ul>
</li>
</ol>
</section>
<section id="phase-2-enhancements-priority-medium">
<h3>Phase 2: Enhancements (Priority: Medium)<a class="headerlink" href="#phase-2-enhancements-priority-medium" title="Link to this heading"></a></h3>
<ol class="arabic simple" start="5">
<li><p><strong>Expand Test Coverage</strong> (4-6 hours)</p>
<ul class="contains-task-list simple">
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Add tests for <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> utility functions</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Add edge case tests</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Add integration tests</p></li>
</ul>
</li>
<li><p><strong>Improve Documentation</strong> (3-4 hours)</p>
<ul class="contains-task-list simple">
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Enhance module docstring</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Add troubleshooting section to README</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Standardize docstring format</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Add DOI links to references</p></li>
</ul>
</li>
<li><p><strong>Code Quality Improvements</strong> (2-3 hours)</p>
<ul class="contains-task-list simple">
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Consolidate duplicate functions</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Remove deprecation warnings or update code</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Improve parameter validation</p></li>
</ul>
</li>
<li><p><strong>Performance Optimization</strong> (2-4 hours)</p>
<ul class="contains-task-list simple">
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Profile critical functions</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Add caching where appropriate</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Optimize NumPy usage</p></li>
</ul>
</li>
</ol>
</section>
<section id="phase-3-advanced-features-priority-low">
<h3>Phase 3: Advanced Features (Priority: Low)<a class="headerlink" href="#phase-3-advanced-features-priority-low" title="Link to this heading"></a></h3>
<ol class="arabic simple" start="9">
<li><p><strong>API Enhancements</strong> (3-5 hours)</p>
<ul class="contains-task-list simple">
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Consider dataclasses for complex parameters</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Add convenience functions for common workflows</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Improve parameter ordering consistency</p></li>
</ul>
</li>
<li><p><strong>Advanced Testing</strong> (2-3 hours)</p>
<ul class="contains-task-list simple">
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Add property-based tests</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Add performance benchmarks</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Add numerical stability tests</p></li>
</ul>
</li>
<li><p><strong>Documentation Expansion</strong> (2-3 hours)</p>
<ul class="contains-task-list simple">
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Add tutorial examples</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Create comparison guides (e.g., different LD measures)</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> Add FAQ section</p></li>
</ul>
</li>
</ol>
</section>
</section>
<hr class="docutils" />
<section id="detailed-recommendations-by-file">
<h2>9. Detailed Recommendations by File<a class="headerlink" href="#detailed-recommendations-by-file" title="Link to this heading"></a></h2>
<section id="init-py">
<h3>9.1 <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code><a class="headerlink" href="#init-py" title="Link to this heading"></a></h3>
<p><strong>Issues</strong>:</p>
<ul class="simple">
<li><p>Missing exports</p></li>
<li><p>Placeholder implementation</p></li>
<li><p>Inconsistent error handling</p></li>
</ul>
<p><strong>Actions</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add to __all__:</span>
<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># ... existing exports ...</span>
    <span class="s2">&quot;correlation_coefficient&quot;</span><span class="p">,</span>
    <span class="s2">&quot;linear_regression&quot;</span><span class="p">,</span>
    <span class="s2">&quot;fisher_exact_test&quot;</span><span class="p">,</span>  <span class="c1"># or remove if not implemented</span>
    <span class="s2">&quot;shannon_entropy&quot;</span><span class="p">,</span>
    <span class="s2">&quot;jensen_shannon_divergence&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="c1"># Fix fisher_exact_test:</span>
<span class="k">def</span><span class="w"> </span><span class="nf">fisher_exact_test</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate Fisher&#39;s exact test...</span>
<span class="sd">    </span>
<span class="sd">    Note: p-value calculation requires scipy.stats.fisher_exact.</span>
<span class="sd">    This function returns odds ratio only. For full implementation,</span>
<span class="sd">    use scipy.stats.fisher_exact directly.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Return odds ratio, raise NotImplementedError for p-value</span>
    <span class="c1"># OR implement using scipy with fallback</span>
</pre></div>
</div>
</section>
<section id="coalescent-py">
<h3>9.2 <code class="docutils literal notranslate"><span class="pre">coalescent.py</span></code><a class="headerlink" href="#coalescent-py" title="Link to this heading"></a></h3>
<p><strong>Issues</strong>:</p>
<ul class="simple">
<li><p>Duplicate <code class="docutils literal notranslate"><span class="pre">watterson_theta</span></code> functions</p></li>
<li><p>Deprecated parameter order</p></li>
<li><p>Incomplete <code class="docutils literal notranslate"><span class="pre">fay_wu_h</span></code> implementation</p></li>
</ul>
<p><strong>Actions</strong>:</p>
<ul class="simple">
<li><p>Remove deprecated parameter order support</p></li>
<li><p>Consolidate <code class="docutils literal notranslate"><span class="pre">watterson_theta</span></code> functions</p></li>
<li><p>Complete <code class="docutils literal notranslate"><span class="pre">fay_wu_h</span></code> or document limitations</p></li>
</ul>
</section>
<section id="popgen-py">
<h3>9.3 <code class="docutils literal notranslate"><span class="pre">popgen.py</span></code><a class="headerlink" href="#popgen-py" title="Link to this heading"></a></h3>
<p><strong>Issues</strong>:</p>
<ul class="simple">
<li><p>Duplicate <code class="docutils literal notranslate"><span class="pre">watterson_theta</span></code></p></li>
<li><p>Inconsistent error handling (raises vs returns)</p></li>
</ul>
<p><strong>Actions</strong>:</p>
<ul class="simple">
<li><p>Remove duplicate, use coalescent version</p></li>
<li><p>Standardize error handling</p></li>
</ul>
</section>
<section id="popgen-stats-py">
<h3>9.4 <code class="docutils literal notranslate"><span class="pre">popgen_stats.py</span></code><a class="headerlink" href="#popgen-stats-py" title="Link to this heading"></a></h3>
<p><strong>Issues</strong>:</p>
<ul class="simple">
<li><p>Requires numpy but not clearly documented</p></li>
<li><p>Some functions have placeholder implementations</p></li>
</ul>
<p><strong>Actions</strong>:</p>
<ul class="simple">
<li><p>Document numpy requirement</p></li>
<li><p>Complete placeholder implementations</p></li>
<li><p>Add better fallbacks when scipy unavailable</p></li>
</ul>
</section>
<section id="id1">
<h3>9.5 <code class="docutils literal notranslate"><span class="pre">README.md</span></code><a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p><strong>Issues</strong>:</p>
<ul class="simple">
<li><p>Incorrect module references</p></li>
<li><p>Missing utility functions documentation</p></li>
<li><p>No troubleshooting section</p></li>
</ul>
<p><strong>Actions</strong>:</p>
<ul class="simple">
<li><p>Fix all module references</p></li>
<li><p>Add section on <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> utilities</p></li>
<li><p>Add troubleshooting/common errors section</p></li>
<li><p>Add performance notes</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="testing-strategy">
<h2>10. Testing Strategy<a class="headerlink" href="#testing-strategy" title="Link to this heading"></a></h2>
<section id="new-tests-needed">
<h3>10.1 New Tests Needed<a class="headerlink" href="#new-tests-needed" title="Link to this heading"></a></h3>
<ol class="arabic">
<li><p><strong>Unit Tests for <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> utilities</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># tests/test_math_utilities.py</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_correlation_coefficient</span><span class="p">():</span>
    <span class="c1"># Test perfect correlation</span>
    <span class="c1"># Test no correlation</span>
    <span class="c1"># Test negative correlation</span>
    <span class="c1"># Test edge cases</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_linear_regression</span><span class="p">():</span>
    <span class="c1"># Test simple line</span>
    <span class="c1"># Test no slope</span>
    <span class="c1"># Test edge cases</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_shannon_entropy</span><span class="p">():</span>
    <span class="c1"># Test maximum entropy</span>
    <span class="c1"># Test minimum entropy</span>
    <span class="c1"># Test normalization</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_jensen_shannon_divergence</span><span class="p">():</span>
    <span class="c1"># Test identical distributions</span>
    <span class="c1"># Test different distributions</span>
    <span class="c1"># Test edge cases</span>
</pre></div>
</div>
</li>
<li><p><strong>Edge Case Tests</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># tests/test_math_edge_cases.py</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_large_sample_sizes</span><span class="p">():</span>
    <span class="c1"># Test with n=1000000</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_extreme_values</span><span class="p">():</span>
    <span class="c1"># Test with very small/large parameters</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_numerical_precision</span><span class="p">():</span>
    <span class="c1"># Test floating-point precision limits</span>
</pre></div>
</div>
</li>
<li><p><strong>Integration Tests</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># tests/test_math_integration.py</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_price_equation_with_popgen</span><span class="p">():</span>
    <span class="c1"># Combine price equation with population genetics</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_workflow_examples</span><span class="p">():</span>
    <span class="c1"># Test complete analysis workflows</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="test-improvements">
<h3>10.2 Test Improvements<a class="headerlink" href="#test-improvements" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Add property-based tests (hypothesis)</p></li>
<li><p>Add performance benchmarks</p></li>
<li><p>Add numerical stability tests</p></li>
<li><p>Improve test documentation</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="documentation-improvements">
<h2>11. Documentation Improvements<a class="headerlink" href="#documentation-improvements" title="Link to this heading"></a></h2>
<section id="module-docstring-enhancement">
<h3>11.1 Module Docstring Enhancement<a class="headerlink" href="#module-docstring-enhancement" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Mathematical and theoretical biology utilities.</span>

<span class="sd">This subpackage provides quantitative biology primitives used across domains:</span>
<span class="sd">- Price equation and selection decomposition</span>
<span class="sd">- Kin and multilevel selection</span>
<span class="sd">- Drift–Diffusion models (DDM)</span>
<span class="sd">- Population genetics models</span>
<span class="sd">- Coalescent theory</span>
<span class="sd">- Epidemiological models</span>
<span class="sd">- Linkage disequilibrium</span>
<span class="sd">- Quantitative genetics</span>

<span class="sd">Submodules:</span>
<span class="sd">- coalescent: Coalescent theory and neutrality tests</span>
<span class="sd">- price: Price equation and selection metrics</span>
<span class="sd">- popgen: Population genetics models</span>
<span class="sd">- ld: Linkage disequilibrium</span>
<span class="sd">- epidemiology: Disease dynamics models</span>
<span class="sd">- dynamics: Population dynamics</span>
<span class="sd">- ddm: Decision-making models</span>
<span class="sd">- selection: Kin and multilevel selection</span>
<span class="sd">- quantgen: Quantitative genetics</span>
<span class="sd">- selection_experiments: Natural selection simulations</span>

<span class="sd">Utility Functions (in this module):</span>
<span class="sd">- correlation_coefficient: Pearson correlation</span>
<span class="sd">- linear_regression: Least-squares regression</span>
<span class="sd">- shannon_entropy: Information entropy</span>
<span class="sd">- jensen_shannon_divergence: Distribution divergence</span>

<span class="sd">Dependencies:</span>
<span class="sd">- numpy: Required for popgen_stats</span>
<span class="sd">- scipy: Optional, for advanced statistics (hardy_weinberg_test, etc.)</span>

<span class="sd">Examples:</span>
<span class="sd">    &gt;&gt;&gt; from metainformant.math import price_equation, tajimas_D</span>
<span class="sd">    &gt;&gt;&gt; # Price equation analysis</span>
<span class="sd">    &gt;&gt;&gt; fitness = [1.0, 1.2, 0.9]</span>
<span class="sd">    &gt;&gt;&gt; traits = [0.2, 0.4, 0.1]</span>
<span class="sd">    &gt;&gt;&gt; cov, trans, total = price_equation(fitness, traits)</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
<section id="readme-md-additions">
<h3>11.2 README.md Additions<a class="headerlink" href="#readme-md-additions" title="Link to this heading"></a></h3>
<p>Add sections:</p>
<ul class="simple">
<li><p>Troubleshooting</p></li>
<li><p>Performance Guidelines</p></li>
<li><p>Utility Functions Reference</p></li>
<li><p>Common Workflows</p></li>
<li><p>FAQ</p></li>
</ul>
</section>
<section id="function-docstring-standardization">
<h3>11.3 Function Docstring Standardization<a class="headerlink" href="#function-docstring-standardization" title="Link to this heading"></a></h3>
<p>Standard template:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">function_name</span><span class="p">(</span><span class="n">param</span><span class="p">:</span> <span class="nb">type</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">return_type</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Brief description.</span>
<span class="sd">    </span>
<span class="sd">    Detailed description of what the function does, including</span>
<span class="sd">    mathematical background if relevant.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        param: Description with constraints/range</span>
<span class="sd">    </span>
<span class="sd">    Returns:</span>
<span class="sd">        Description of return value with units/range</span>
<span class="sd">    </span>
<span class="sd">    Raises:</span>
<span class="sd">        ValueError: When and why</span>
<span class="sd">    </span>
<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; function_name(example_value)</span>
<span class="sd">        expected_result</span>
<span class="sd">    </span>
<span class="sd">    References:</span>
<span class="sd">        Author (Year). Title. Journal, volume, pages.</span>
<span class="sd">        DOI: 10.xxxx/xxxxx (if available)</span>
<span class="sd">    </span>
<span class="sd">    Note:</span>
<span class="sd">        Any important limitations or assumptions</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="code-quality-metrics">
<h2>12. Code Quality Metrics<a class="headerlink" href="#code-quality-metrics" title="Link to this heading"></a></h2>
<section id="current-metrics">
<h3>12.1 Current Metrics<a class="headerlink" href="#current-metrics" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Lines of Code</strong>: ~4,500 (excluding tests)</p></li>
<li><p><strong>Functions</strong>: ~113</p></li>
<li><p><strong>Classes</strong>: 2 (<code class="docutils literal notranslate"><span class="pre">CoalescentSummary</span></code>, <code class="docutils literal notranslate"><span class="pre">GenerationResult</span></code>, <code class="docutils literal notranslate"><span class="pre">GenerationsResult</span></code>)</p></li>
<li><p><strong>Test Files</strong>: 22</p></li>
<li><p><strong>Test Coverage</strong>: ~85% (estimated)</p></li>
</ul>
</section>
<section id="target-metrics">
<h3>12.2 Target Metrics<a class="headerlink" href="#target-metrics" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Test Coverage</strong>: &gt;95%</p></li>
<li><p><strong>Documentation Coverage</strong>: 100%</p></li>
<li><p><strong>Type Coverage</strong>: 100% (already achieved)</p></li>
<li><p><strong>Cyclomatic Complexity</strong>: &lt;10 for all functions</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="implementation-priority">
<h2>13. Implementation Priority<a class="headerlink" href="#implementation-priority" title="Link to this heading"></a></h2>
<section id="week-1-critical-fixes">
<h3>Week 1: Critical Fixes<a class="headerlink" href="#week-1-critical-fixes" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p>Fix placeholder implementations</p></li>
<li><p>Complete exports</p></li>
<li><p>Fix documentation errors</p></li>
</ol>
</section>
<section id="week-2-test-coverage">
<h3>Week 2: Test Coverage<a class="headerlink" href="#week-2-test-coverage" title="Link to this heading"></a></h3>
<ol class="arabic simple" start="4">
<li><p>Add utility function tests</p></li>
<li><p>Add edge case tests</p></li>
<li><p>Improve existing tests</p></li>
</ol>
</section>
<section id="week-3-documentation">
<h3>Week 3: Documentation<a class="headerlink" href="#week-3-documentation" title="Link to this heading"></a></h3>
<ol class="arabic simple" start="7">
<li><p>Enhance module docs</p></li>
<li><p>Update README</p></li>
<li><p>Standardize docstrings</p></li>
</ol>
</section>
<section id="week-4-code-quality">
<h3>Week 4: Code Quality<a class="headerlink" href="#week-4-code-quality" title="Link to this heading"></a></h3>
<ol class="arabic simple" start="10">
<li><p>Consolidate duplicates</p></li>
<li><p>Standardize error handling</p></li>
<li><p>Performance optimization</p></li>
</ol>
</section>
</section>
<hr class="docutils" />
<section id="success-criteria">
<h2>14. Success Criteria<a class="headerlink" href="#success-criteria" title="Link to this heading"></a></h2>
<section id="must-have-v1-0">
<h3>Must Have (v1.0)<a class="headerlink" href="#must-have-v1-0" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>✅ All functions exported correctly</p></li>
<li><p>✅ No placeholder implementations</p></li>
<li><p>✅ 100% docstring coverage</p></li>
<li><p>✅ &gt;90% test coverage</p></li>
<li><p>✅ All documentation accurate</p></li>
</ul>
</section>
<section id="should-have-v1-1">
<h3>Should Have (v1.1)<a class="headerlink" href="#should-have-v1-1" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>⚠️ Consistent error handling</p></li>
<li><p>⚠️ Performance optimizations</p></li>
<li><p>⚠️ Enhanced examples</p></li>
</ul>
</section>
<section id="nice-to-have-v1-2">
<h3>Nice to Have (v1.2)<a class="headerlink" href="#nice-to-have-v1-2" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>📝 Tutorial guides</p></li>
<li><p>📝 Performance benchmarks</p></li>
<li><p>📝 Advanced workflows</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="conclusion">
<h2>15. Conclusion<a class="headerlink" href="#conclusion" title="Link to this heading"></a></h2>
<p>The math module is well-designed and mathematically rigorous. The main improvements needed are:</p>
<ol class="arabic simple">
<li><p><strong>Completeness</strong>: Fix placeholder implementations and missing exports</p></li>
<li><p><strong>Consistency</strong>: Standardize error handling and documentation</p></li>
<li><p><strong>Testing</strong>: Expand test coverage, especially for utilities</p></li>
<li><p><strong>Documentation</strong>: Fix inaccuracies and enhance with examples</p></li>
</ol>
<p>With these improvements, the module will be production-ready and maintainable.</p>
<hr class="docutils" />
<p><strong>Reviewer</strong>: AI Assistant<br />
<strong>Review Date</strong>: 2025-01-06<br />
<strong>Next Review</strong>: After Phase 1 completion</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, METAINFORMANT Contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>