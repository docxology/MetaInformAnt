

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Genome Setup Guide &mdash; METAINFORMANT 0.2.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=938c9ccc"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../../index.html" class="icon icon-home">
            METAINFORMANT
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../dna/index.html">DNA: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">RNA: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../protein/index.html">Protein: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gwas/index.html">GWAS (Genome-Wide Association Studies)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../epigenome/index.html">Epigenome: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../epigenome/index.html#key-components">Key Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../epigenome/index.html#integration-with-genomics">Integration with Genomics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../epigenome/index.html#analysis-workflows">Analysis Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../epigenome/index.html#planned-extensions">Planned Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ontology/index.html">Ontology Module Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../phenotype/index.html">Phenotype: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ecology/index.html">Ecology: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ecology/index.html#key-components">Key Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ecology/index.html#analysis-workflows">Analysis Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ecology/index.html#integration-with-other-modules">Integration with Other Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ecology/index.html#planned-extensions">Planned Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../math/index.html">Math: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ml/index.html">Machine Learning: Biological Data Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networks/index.html">Networks: Biological Network Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../singlecell/index.html">Single-Cell Genomics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quality/index.html">Quality Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../visualization/index.html">Visualization: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simulation/index.html">Simulation: Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../life_events/index.html">Life Events Module</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../testing.html">Testing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">METAINFORMANT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Genome Setup Guide</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/rna/amalgkit/genome_setup_guide.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="genome-setup-guide">
<h1>Genome Setup Guide<a class="headerlink" href="#genome-setup-guide" title="Link to this heading"></a></h1>
<p><strong>User Guide</strong> - Step-by-step instructions for setting up genomes and kallisto indexes.</p>
<blockquote>
<div><p><strong>For technical API reference</strong>: See <a class="reference internal" href="genome_preparation.html"><span class="std std-doc">genome_preparation.md</span></a><br />
<strong>For command reference</strong>: See <a class="reference internal" href="commands.html"><span class="std std-doc">commands.md</span></a><br />
<strong>For API functions</strong>: See <a class="reference internal" href="../API.html#genome-preparation-functions"><span class="std std-ref">API Reference</span></a></p>
</div></blockquote>
<p>This guide provides step-by-step instructions for setting up genomes and kallisto indexes for all species in the METAINFORMANT RNA-seq workflow.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>The genome setup process consists of three main steps:</p>
<ol class="arabic simple">
<li><p><strong>Download Genomes</strong>: Download NCBI genome packages for each species</p></li>
<li><p><strong>Prepare Transcriptomes</strong>: Extract RNA FASTA files from downloaded genomes</p></li>
<li><p><strong>Build Indexes</strong>: Build kallisto indexes from transcriptome FASTA files</p></li>
</ol>
</section>
<section id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Python 3.11+</p></li>
<li><p>METAINFORMANT installed or accessible</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kallisto</span></code> installed (for index building): <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">-c</span> <span class="pre">bioconda</span> <span class="pre">kallisto</span></code> or <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">-y</span> <span class="pre">kallisto</span></code></p></li>
<li><p>NCBI datasets CLI (optional, but recommended): <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">-c</span> <span class="pre">bioconda</span> <span class="pre">ncbi-datasets-cli</span></code></p></li>
</ul>
<p><strong>Note</strong>: For Python packages, use <code class="docutils literal notranslate"><span class="pre">uv</span> <span class="pre">pip</span> <span class="pre">install</span></code> (primary method). System tools like kallisto can use conda or system package managers.</p>
<ul class="simple">
<li><p>Sufficient disk space (genomes: 100MB-1GB each, indexes: 20-50MB each)</p></li>
</ul>
</section>
<section id="quick-start">
<h2>Quick Start<a class="headerlink" href="#quick-start" title="Link to this heading"></a></h2>
<section id="automated-complete-setup">
<h3>Automated Complete Setup<a class="headerlink" href="#automated-complete-setup" title="Link to this heading"></a></h3>
<p>The fastest way to set up all species:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run the master orchestrator</span>
python3<span class="w"> </span>scripts/rna/orchestrate_genome_setup.py
</pre></div>
</div>
<p>This will:</p>
<ul class="simple">
<li><p>Verify current status</p></li>
<li><p>Download missing genomes</p></li>
<li><p>Prepare transcriptomes</p></li>
<li><p>Build kallisto indexes</p></li>
<li><p>Verify final status</p></li>
</ul>
</section>
<section id="step-by-step-setup">
<h3>Step-by-Step Setup<a class="headerlink" href="#step-by-step-setup" title="Link to this heading"></a></h3>
<p>For more control, run each step individually:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Check current status</span>
python3<span class="w"> </span>scripts/rna/verify_genomes_and_indexes.py

<span class="c1"># 2. Download missing genomes</span>
python3<span class="w"> </span>scripts/rna/download_missing_genomes.py

<span class="c1"># 3. Prepare transcriptomes</span>
python3<span class="w"> </span>scripts/rna/prepare_transcriptomes.py

<span class="c1"># 4. Build kallisto indexes</span>
python3<span class="w"> </span>scripts/rna/build_kallisto_indexes.py

<span class="c1"># 5. Verify final status</span>
python3<span class="w"> </span>scripts/rna/verify_genomes_and_indexes.py
</pre></div>
</div>
</section>
</section>
<section id="detailed-instructions">
<h2>Detailed Instructions<a class="headerlink" href="#detailed-instructions" title="Link to this heading"></a></h2>
<section id="step-1-verification">
<h3>Step 1: Verification<a class="headerlink" href="#step-1-verification" title="Link to this heading"></a></h3>
<p>Before starting, check what’s already done:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>scripts/rna/verify_genomes_and_indexes.py
</pre></div>
</div>
<p><strong>Output</strong>: Status report showing:</p>
<ul class="simple">
<li><p>Which genomes are downloaded</p></li>
<li><p>Which transcriptomes are prepared</p></li>
<li><p>Which indexes are built</p></li>
<li><p>Recommended next steps</p></li>
</ul>
<p><strong>Example Output</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>================================================================================
VERIFICATION SUMMARY
================================================================================
Total species: 24

Genome Downloads:
  ✓ Downloaded: 9/24 (37.5%)
  ✗ Missing: 15/24

RNA FASTA Files (of downloaded genomes):
  ✓ Found: 3/9 (33.3%)
  ✗ Missing: 6/9

Kallisto Indexes (of prepared transcriptomes):
  ✓ Built: 4/3 (133.3%)
  ✗ Missing: 0/3

================================================================================

Next Steps:
  → Download 15 missing genomes:
     python3 scripts/rna/download_missing_genomes.py
  → Prepare 6 transcriptomes:
     python3 scripts/rna/prepare_transcriptomes.py
</pre></div>
</div>
</section>
<section id="step-2-download-genomes">
<h3>Step 2: Download Genomes<a class="headerlink" href="#step-2-download-genomes" title="Link to this heading"></a></h3>
<p>Download genomes for species that are missing them:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Download all missing genomes</span>
python3<span class="w"> </span>scripts/rna/download_missing_genomes.py

<span class="c1"># Download for specific species</span>
python3<span class="w"> </span>scripts/rna/download_missing_genomes.py<span class="w"> </span>--species<span class="w"> </span>camponotus_floridanus

<span class="c1"># Dry run (see what would be downloaded)</span>
python3<span class="w"> </span>scripts/rna/download_missing_genomes.py<span class="w"> </span>--dry-run
</pre></div>
</div>
<p><strong>What it does</strong>:</p>
<ul class="simple">
<li><p>Scans all config files in <code class="docutils literal notranslate"><span class="pre">config/amalgkit/</span></code></p></li>
<li><p>Identifies species with missing genome downloads</p></li>
<li><p>Downloads using best-effort methods (CLI → API → FTP)</p></li>
<li><p>Extracts genome packages</p></li>
<li><p>Logs progress and results</p></li>
</ul>
<p><strong>Output Files</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">output/amalgkit/{species}/genome/download_record.json</span></code> - Download metadata</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output/genome_download_results.json</span></code> - Summary report</p></li>
</ul>
<p><strong>Time</strong>: ~5-30 minutes per genome depending on size and network</p>
</section>
<section id="step-3-prepare-transcriptomes">
<h3>Step 3: Prepare Transcriptomes<a class="headerlink" href="#step-3-prepare-transcriptomes" title="Link to this heading"></a></h3>
<p>Extract RNA FASTA files from downloaded genomes:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Prepare all transcriptomes</span>
python3<span class="w"> </span>scripts/rna/prepare_transcriptomes.py

<span class="c1"># Prepare for specific species</span>
python3<span class="w"> </span>scripts/rna/prepare_transcriptomes.py<span class="w"> </span>--species<span class="w"> </span>camponotus_floridanus

<span class="c1"># Dry run</span>
python3<span class="w"> </span>scripts/rna/prepare_transcriptomes.py<span class="w"> </span>--dry-run
</pre></div>
</div>
<p><strong>What it does</strong>:</p>
<ul class="simple">
<li><p>Finds RNA FASTA files in extracted genome packages</p></li>
<li><p>Decompresses if needed (handles <code class="docutils literal notranslate"><span class="pre">.gz</span></code> files)</p></li>
<li><p>Copies to <code class="docutils literal notranslate"><span class="pre">work_dir/fasta/{Species_Name}_rna.fasta</span></code></p></li>
<li><p>Skips already-prepared transcriptomes</p></li>
</ul>
<p><strong>Output Files</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">output/amalgkit/{species}/work/fasta/{Species_Name}_rna.fasta</span></code> - Prepared transcriptome</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output/transcriptome_preparation_results.json</span></code> - Summary report</p></li>
</ul>
<p><strong>Time</strong>: ~1-5 minutes per species</p>
</section>
<section id="step-4-build-kallisto-indexes">
<h3>Step 4: Build Kallisto Indexes<a class="headerlink" href="#step-4-build-kallisto-indexes" title="Link to this heading"></a></h3>
<p>Build kallisto indexes from prepared transcriptomes:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build all indexes</span>
python3<span class="w"> </span>scripts/rna/build_kallisto_indexes.py

<span class="c1"># Build for specific species</span>
python3<span class="w"> </span>scripts/rna/build_kallisto_indexes.py<span class="w"> </span>--species<span class="w"> </span>camponotus_floridanus

<span class="c1"># Custom k-mer size (for short reads &lt;100bp)</span>
python3<span class="w"> </span>scripts/rna/build_kallisto_indexes.py<span class="w"> </span>--kmer-size<span class="w"> </span><span class="m">23</span>

<span class="c1"># Dry run</span>
python3<span class="w"> </span>scripts/rna/build_kallisto_indexes.py<span class="w"> </span>--dry-run
</pre></div>
</div>
<p><strong>What it does</strong>:</p>
<ul class="simple">
<li><p>Checks if kallisto is available</p></li>
<li><p>Finds prepared transcriptome FASTA files</p></li>
<li><p>Builds kallisto indexes with specified k-mer size</p></li>
<li><p>Skips already-built indexes</p></li>
</ul>
<p><strong>Output Files</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">output/amalgkit/{species}/work/index/{Species_Name}_transcripts.idx</span></code> - Kallisto index</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output/kallisto_index_build_results.json</span></code> - Summary report</p></li>
</ul>
<p><strong>Time</strong>: ~1-10 minutes per species depending on transcriptome size</p>
<p><strong>k-mer Size Guidelines</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">31</span></code> (default): Standard reads ≥100bp</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">23</span></code>: Short reads &lt;100bp</p></li>
</ul>
</section>
<section id="step-5-final-verification">
<h3>Step 5: Final Verification<a class="headerlink" href="#step-5-final-verification" title="Link to this heading"></a></h3>
<p>Verify that everything is set up correctly:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>scripts/rna/verify_genomes_and_indexes.py
</pre></div>
</div>
<p><strong>Expected Output</strong> (when complete):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>================================================================================
VERIFICATION SUMMARY
================================================================================
Total species: 24

Genome Downloads:
  ✓ Downloaded: 24/24 (100.0%)
  ✗ Missing: 0/24

RNA FASTA Files (of downloaded genomes):
  ✓ Found: 24/24 (100.0%)
  ✗ Missing: 0/24

Kallisto Indexes (of prepared transcriptomes):
  ✓ Built: 24/24 (100.0%)
  ✗ Missing: 0/24

================================================================================

Next Steps:
  ✓ All species are fully prepared!
</pre></div>
</div>
</section>
</section>
<section id="single-species-setup">
<h2>Single Species Setup<a class="headerlink" href="#single-species-setup" title="Link to this heading"></a></h2>
<p>For setting up a single species:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Complete setup for one species</span>
python3<span class="w"> </span>scripts/rna/orchestrate_genome_setup.py<span class="w"> </span>--species<span class="w"> </span>camponotus_floridanus

<span class="c1"># Or step-by-step:</span>
python3<span class="w"> </span>scripts/rna/download_missing_genomes.py<span class="w"> </span>--species<span class="w"> </span>camponotus_floridanus
python3<span class="w"> </span>scripts/rna/prepare_transcriptomes.py<span class="w"> </span>--species<span class="w"> </span>camponotus_floridanus
python3<span class="w"> </span>scripts/rna/build_kallisto_indexes.py<span class="w"> </span>--species<span class="w"> </span>camponotus_floridanus
</pre></div>
</div>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading"></a></h2>
<section id="issue-genome-download-fails">
<h3>Issue: Genome Download Fails<a class="headerlink" href="#issue-genome-download-fails" title="Link to this heading"></a></h3>
<p><strong>Symptoms</strong>: Download script reports errors</p>
<p><strong>Solutions</strong>:</p>
<ol class="arabic simple">
<li><p>Check network connectivity</p></li>
<li><p>Verify NCBI datasets CLI is installed: <code class="docutils literal notranslate"><span class="pre">datasets</span> <span class="pre">--version</span></code></p></li>
<li><p>Check disk space: <code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">-h</span></code></p></li>
<li><p>Try downloading single species to isolate the issue</p></li>
<li><p>Check download logs: <code class="docutils literal notranslate"><span class="pre">output/amalgkit/{species}/genome/download_record.json</span></code></p></li>
</ol>
</section>
<section id="issue-rna-fasta-not-found">
<h3>Issue: RNA FASTA Not Found<a class="headerlink" href="#issue-rna-fasta-not-found" title="Link to this heading"></a></h3>
<p><strong>Symptoms</strong>: Prepare script reports “RNA FASTA not found”</p>
<p><strong>Solutions</strong>:</p>
<ol class="arabic">
<li><p>Verify genome download completed: Check <code class="docutils literal notranslate"><span class="pre">download_record.json</span></code></p></li>
<li><p>Ensure <code class="docutils literal notranslate"><span class="pre">include:</span> <span class="pre">[&quot;rna&quot;]</span></code> in genome config</p></li>
<li><p>Manually search for RNA FASTA:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>find<span class="w"> </span>output/amalgkit/<span class="o">{</span>species<span class="o">}</span>/genome<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;rna.fna*&quot;</span>
</pre></div>
</div>
</li>
<li><p>Re-download genome if RNA FASTA is missing</p></li>
</ol>
</section>
<section id="issue-kallisto-index-build-fails">
<h3>Issue: Kallisto Index Build Fails<a class="headerlink" href="#issue-kallisto-index-build-fails" title="Link to this heading"></a></h3>
<p><strong>Symptoms</strong>: Build script reports errors</p>
<p><strong>Solutions</strong>:</p>
<ol class="arabic">
<li><p>Verify kallisto is installed: <code class="docutils literal notranslate"><span class="pre">which</span> <span class="pre">kallisto</span></code></p></li>
<li><p>Check transcriptome FASTA exists:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls<span class="w"> </span>-lh<span class="w"> </span>output/amalgkit/<span class="o">{</span>species<span class="o">}</span>/work/fasta/*.fasta
</pre></div>
</div>
</li>
<li><p>Verify FASTA file is valid:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>head<span class="w"> </span>output/amalgkit/<span class="o">{</span>species<span class="o">}</span>/work/fasta/*.fasta
</pre></div>
</div>
</li>
<li><p>Check disk space</p></li>
<li><p>Try building with different k-mer size</p></li>
</ol>
</section>
<section id="issue-script-cant-find-config-files">
<h3>Issue: Script Can’t Find Config Files<a class="headerlink" href="#issue-script-cant-find-config-files" title="Link to this heading"></a></h3>
<p><strong>Symptoms</strong>: “Config directory not found” error</p>
<p><strong>Solutions</strong>:</p>
<ol class="arabic">
<li><p>Run from repository root</p></li>
<li><p>Specify config directory explicitly:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>scripts/rna/verify_genomes_and_indexes.py<span class="w"> </span>--config-dir<span class="w"> </span>config/amalgkit
</pre></div>
</div>
</li>
<li><p>Check that config files exist:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls<span class="w"> </span>config/amalgkit/amalgkit_*.yaml
</pre></div>
</div>
</li>
</ol>
</section>
</section>
<section id="best-practices">
<h2>Best Practices<a class="headerlink" href="#best-practices" title="Link to this heading"></a></h2>
<section id="incremental-setup">
<h3>1. Incremental Setup<a class="headerlink" href="#incremental-setup" title="Link to this heading"></a></h3>
<p>Set up genomes incrementally as needed:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check status first</span>
python3<span class="w"> </span>scripts/rna/verify_genomes_and_indexes.py

<span class="c1"># Download only what&#39;s missing</span>
python3<span class="w"> </span>scripts/rna/download_missing_genomes.py

<span class="c1"># Prepare only what&#39;s ready</span>
python3<span class="w"> </span>scripts/rna/prepare_transcriptomes.py

<span class="c1"># Build only what&#39;s needed</span>
python3<span class="w"> </span>scripts/rna/build_kallisto_indexes.py
</pre></div>
</div>
</section>
<section id="dry-run-first">
<h3>2. Dry Run First<a class="headerlink" href="#dry-run-first" title="Link to this heading"></a></h3>
<p>Always test with <code class="docutils literal notranslate"><span class="pre">--dry-run</span></code> before actual operations:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>scripts/rna/download_missing_genomes.py<span class="w"> </span>--dry-run
python3<span class="w"> </span>scripts/rna/prepare_transcriptomes.py<span class="w"> </span>--dry-run
python3<span class="w"> </span>scripts/rna/build_kallisto_indexes.py<span class="w"> </span>--dry-run
</pre></div>
</div>
</section>
<section id="verify-regularly">
<h3>3. Verify Regularly<a class="headerlink" href="#verify-regularly" title="Link to this heading"></a></h3>
<p>Check status regularly to track progress:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>scripts/rna/verify_genomes_and_indexes.py
</pre></div>
</div>
</section>
<section id="monitor-disk-space">
<h3>4. Monitor Disk Space<a class="headerlink" href="#monitor-disk-space" title="Link to this heading"></a></h3>
<p>Genome downloads can be large:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check space usage</span>
du<span class="w"> </span>-sh<span class="w"> </span>output/amalgkit/*/genome
du<span class="w"> </span>-sh<span class="w"> </span>output/amalgkit/*/work/fasta
du<span class="w"> </span>-sh<span class="w"> </span>output/amalgkit/*/work/index
</pre></div>
</div>
</section>
<section id="keep-results-files">
<h3>5. Keep Results Files<a class="headerlink" href="#keep-results-files" title="Link to this heading"></a></h3>
<p>All scripts generate JSON result files. Keep these for:</p>
<ul class="simple">
<li><p>Tracking progress</p></li>
<li><p>Debugging issues</p></li>
<li><p>Reporting status</p></li>
</ul>
</section>
</section>
<section id="script-reference">
<h2>Script Reference<a class="headerlink" href="#script-reference" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Script</p></th>
<th class="head"><p>Purpose</p></th>
<th class="head"><p>Key Options</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">verify_genomes_and_indexes.py</span></code></p></td>
<td><p>Check status</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">--species</span></code>, <code class="docutils literal notranslate"><span class="pre">--output</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">download_missing_genomes.py</span></code></p></td>
<td><p>Download genomes</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">--species</span></code>, <code class="docutils literal notranslate"><span class="pre">--dry-run</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">prepare_transcriptomes.py</span></code></p></td>
<td><p>Prepare FASTA</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">--species</span></code>, <code class="docutils literal notranslate"><span class="pre">--dry-run</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">build_kallisto_indexes.py</span></code></p></td>
<td><p>Build indexes</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">--species</span></code>, <code class="docutils literal notranslate"><span class="pre">--kmer-size</span></code>, <code class="docutils literal notranslate"><span class="pre">--dry-run</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">orchestrate_genome_setup.py</span></code></p></td>
<td><p>Complete pipeline</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">--species</span></code>, <code class="docutils literal notranslate"><span class="pre">--skip-*</span></code>, <code class="docutils literal notranslate"><span class="pre">--dry-run</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="file-locations">
<h2>File Locations<a class="headerlink" href="#file-locations" title="Link to this heading"></a></h2>
<section id="genome-files">
<h3>Genome Files<a class="headerlink" href="#genome-files" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Download location: <code class="docutils literal notranslate"><span class="pre">output/amalgkit/{species}/genome/</span></code></p></li>
<li><p>RNA FASTA (in package): <code class="docutils literal notranslate"><span class="pre">output/amalgkit/{species}/genome/ncbi_dataset_api_extracted/ncbi_dataset/data/{accession}/rna.fna</span></code></p></li>
</ul>
</section>
<section id="prepared-transcriptomes">
<h3>Prepared Transcriptomes<a class="headerlink" href="#prepared-transcriptomes" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Location: <code class="docutils literal notranslate"><span class="pre">output/amalgkit/{species}/work/fasta/{Species_Name}_rna.fasta</span></code></p></li>
</ul>
</section>
<section id="kallisto-indexes">
<h3>Kallisto Indexes<a class="headerlink" href="#kallisto-indexes" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Location: <code class="docutils literal notranslate"><span class="pre">output/amalgkit/{species}/work/index/{Species_Name}_transcripts.idx</span></code></p></li>
</ul>
</section>
<section id="results-files">
<h3>Results Files<a class="headerlink" href="#results-files" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Verification: <code class="docutils literal notranslate"><span class="pre">output/genome_index_status.json</span></code></p></li>
<li><p>Downloads: <code class="docutils literal notranslate"><span class="pre">output/genome_download_results.json</span></code></p></li>
<li><p>Preparation: <code class="docutils literal notranslate"><span class="pre">output/transcriptome_preparation_results.json</span></code></p></li>
<li><p>Index building: <code class="docutils literal notranslate"><span class="pre">output/kallisto_index_build_results.json</span></code></p></li>
</ul>
</section>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Link to this heading"></a></h2>
<section id="technical-reference">
<h3>Technical Reference<a class="headerlink" href="#technical-reference" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong><a class="reference internal" href="genome_preparation.html"><span class="std std-doc">genome_preparation.md</span></a></strong> - Technical API reference</p></li>
<li><p><strong><a class="reference internal" href="commands.html"><span class="std std-doc">commands.md</span></a></strong> - Command reference for all scripts</p></li>
</ul>
</section>
<section id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong><a class="reference internal" href="../API.html#genome-preparation-functions"><span class="std std-ref">API Reference</span></a></strong> - Complete function documentation</p></li>
<li><p><strong><a class="reference internal" href="FUNCTIONS.html"><span class="std std-doc">Function Index</span></a></strong> - Quick function lookup</p></li>
<li><p><strong><a class="reference internal" href="#steps/quant.md"><span class="xref myst">Quantification Step</span></a></strong> - Using indexes for quantification</p></li>
<li><p><strong><a class="reference internal" href="amalgkit.html"><span class="std std-doc">Pipeline Overview</span></a></strong> - Complete workflow documentation</p></li>
<li><p><strong><a class="reference internal" href="../README.html"><span class="std std-doc">Main Index</span></a></strong> - RNA domain master index</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, METAINFORMANT Contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>